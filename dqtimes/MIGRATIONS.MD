# ğŸ“‹ Workflow de MigraÃ§Ãµes de Banco

## ğŸ› ï¸ Ferramentas
- **Alembic**: Gerenciamento de migrations
- **SQLAlchemy**: ORM para autogenerate
- **PostgreSQL**: Banco de dados

## ğŸ“ Estrutura
migrations/
â”œâ”€â”€ versions/ # Arquivos de migraÃ§Ã£o
â”œâ”€â”€ env.py # ConfiguraÃ§Ã£o do Alembic
â””â”€â”€ script.py.mako # Template das migrations

text

## ğŸš€ Comandos BÃ¡sicos

### Criar Nova Migration
```bash
alembic revision --autogenerate -m "descricao_da_mudanca"
Aplicar Migrations
bash
# Aplicar todas
alembic upgrade head

# Aplicar atÃ© versÃ£o especÃ­fica
alembic upgrade +1
Rollback
bash
# Reverter uma migration
alembic downgrade -1

# Reverter para versÃ£o especÃ­fica
alembic downgrade <version_id>
ğŸ”„ Fluxo de Trabalho
1. Desenvolvimento
bash
# Criar migration
alembic revision --autogenerate -m "add_user_table"

# Testar localmente
alembic upgrade head
2. Staging
bash
# Aplicar e validar
alembic upgrade head
pytest tests/
3. ProduÃ§Ã£o
bash
# MigraÃ§Ã£o segura com backup
chmod +x scripts/safe_migration.sh
./scripts/safe_migration.sh
ğŸ›¡ï¸ Rollback Seguro
Todas as migrations devem ter:

upgrade(): Aplica mudanÃ§as

downgrade(): Reverte mudanÃ§as

ğŸ“ Suporte
Em caso de problemas:

Verificar logs: alembic current

Rollback: alembic downgrade -1

Restaurar backup se necessÃ¡rio

text

---

## ğŸ’» PASSO 2: Configurar e Testar Localmente

### 2.1 Instalar dependÃªncia (se necessÃ¡rio):
```bash
pip install alembic
2.2 Testar a configuraÃ§Ã£o:
bash
# Verificar se o Alembic funciona
alembic current

# Deve mostrar: "head" (se nÃ£o houver migrations)
2.3 Tornar o script executÃ¡vel:
bash
chmod +x scripts/safe_migration.sh